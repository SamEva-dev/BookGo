@page
@model BookGo.Contracts.Dtos.PagedResult<BookGo.Contracts.Dtos.HotelListItem>

@if (Model.Items.Count == 0)
{
	<p>Aucun résultat.</p>
}
else
{
    <div class="row row-cols-1 row-cols-md-2 g-3">
        @foreach (var h in Model.Items)
        {
            <div class="col">
                <div class="card p-3">
                    <h5>@h.Name <small class="text-muted">(@h.City)</small></h5>
                    <p class="mb-1">@h.NightPrice @h.Currency / nuit</p>
                    @if (h.EcoLabeled)
                    {
                        <span class="badge bg-success">Eco</span>
                    }
                    <form class="mt-2"
                          hx-post="/Cart"
                          hx-target="#cart"
                          hx-swap="outerHTML">
                        <input type="hidden" name="HotelId" value="@h.Id" />
                        <label class="form-label">Arrivée</label>
                        <input type="date" class="form-control" name="CheckIn" required />
                        <label class="form-label mt-1">Départ</label>
                        <input type="date" class="form-control" name="CheckOut" required />
                        <button class="btn btn-outline-primary mt-2" type="submit">Ajouter au panier</button>
                    </form>
                </div>
            </div>
        }
    </div>

    @if (Model.Total > Model.Page * Model.PageSize)
    {
        <div class="mt-3">
            <button class="btn btn-secondary"
                    hx-get="/Search?City=@Request.Query["City"]&EcoOnly=@Request.Query["EcoOnly"]&Page=@(Model.Page+1)&PageSize=@Model.PageSize"
                    hx-target="#results" hx-swap="outerHTML">
                Plus
            </button>
        </div>
    }
}